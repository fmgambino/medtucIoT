# +--------------------------------------------------+
# | .htaccess universal para entorno local y Hostinger |
# | Col√≥calo en la ra√≠z del proyecto                 |
# +--------------------------------------------------+

# 1) Activar mod_rewrite
RewriteEngine On

# 2) Si est√°s en local (XAMPP), activa esta l√≠nea:
#    RewriteBase /medtucIoT/

# En producci√≥n (Hostinger - subdominio ra√≠z), NO actives RewriteBase
#    RewriteBase /

# üí° Usa SOLO una RewriteBase seg√∫n el entorno

# 3) Redirigir ra√≠z (/) a login
RewriteRule ^$ login [L,R=302]

# 4) Rutas amigables ‚Üí scripts en /app/
RewriteRule ^login/?$        app/login.php        [L,QSA]
RewriteRule ^register/?$     app/register.php     [L,QSA]
RewriteRule ^dashboard/?$    app/dashboard.php    [L,QSA]
RewriteRule ^logout/?$       app/logout.php       [L,QSA]
RewriteRule ^sensor/?$       app/sensor.php       [L,QSA]
RewriteRule ^get_latest/?$   app/get_latest.php   [L,QSA]
RewriteRule ^get_history/?$  app/get_history.php  [L,QSA]

# 5) Bloquear acceso directo a /app/*.php (excepto logout)
RewriteCond %{THE_REQUEST} \s/app/.*\.php [NC]
RewriteCond %{THE_REQUEST} \s/app/(?!logout\.php).*\.php [NC]
RewriteRule ^app/.*\.php$ - [F]

# 6) Deshabilitar listado de directorios
Options -Indexes
